import { StandardState, StatusType } from '@c2pkg/statemachine';
import { Init, Provide, Scope, ScopeEnum } from '@midwayjs/core';

import { BaseBndStateMachine, StateCode } from '../../common';
import { <%= PascalCase %>Head } from '../entity';

export enum <%= PascalCase %>StateEnum {}

export class <%= PascalCase %>State extends StandardState {
  stateCode: StateCode;
  constructor(
    stateCode: StateCode,
    label: string,
    status: StatusType,
    customizable = false
  ) {
    super(stateCode as string, label, status, customizable);
  }
}

/**
 * <%= label %>状态机
 */
@Provide()
@Scope(ScopeEnum.Singleton)
export class BondInvtStateMachine extends BaseBndStateMachine {
  bizmetaKey = <%= PascalCase %>Head.BIZMETA_KEY;

  @Init()
  async init() {
    super.initCommonStates();
    this.declareExtraStates();
    this.allStates = this.stateList;
  }

  declareExtraStates() {
    // TODO: 添加扩展状态
  }
}
